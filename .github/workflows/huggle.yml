name: huggle

on: push

jobs:
  build-macos:
    name: macOS
    runs-on: macos-latest
    env:
      QTTYPE: 5
    strategy:
      fail-fast: false
      matrix:
        qt-version: [5.15.2, 5.12.10]
    steps:
      - uses: jurplel/install-qt-action@v2
        with:
          version: ${{ matrix.qt-version }}
          modules: 'qtwebengine'
      - uses: actions/checkout@v2
      - run: travis/before_install_osx.sh
      - run: travis/install_osx.sh
      - run: travis/before_script_osx.sh
      - run: travis/script_osx.sh

  build-macos-packaging:
    name: macOS (Packaging)
    runs-on: macos-latest
    env:
      QTTYPE: 5
    strategy:
      fail-fast: false
      matrix:
        qt-version: [5.15.2, 5.12.10]
    steps:
      - uses: jurplel/install-qt-action@v2
        with:
          modules: 'qtwebengine'
          version: ${{ matrix.qt-version }}
      - uses: actions/checkout@v2
      - run: brew install tree
      - run: |
          pwd
          cd MacOS
          pwd
          ./release.sh $Qt5_Dir
      - run: tree .

